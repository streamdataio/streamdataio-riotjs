<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Stockmarket sample</title>

        <link rel="stylesheet" type="text/css" href="../node_modules/bootstrap/dist/css/bootstrap.min.css" />

        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="css/stockmarket-barchart.css" />
    </head>
    <body>
        <!-- mount point -->
        <stockmarket-table></stockmarket-table>
        <stockmarket-barchart height="500" width="960"></stockmarket-barchart>

        <!-- include riot.js -->
        <script src="../node_modules/riot/riot.min.js"></script>

        <script src="../node_modules/d3/build/d3.min.js"></script>

        <script src="../dist/js/stockmarket-table.js"></script>
        <script src="../dist/js/stockmarket-barchart.js"></script>

        <!-- mount normally -->
        <script>
            var xmlhttp = new XMLHttpRequest();
            var url = "http://cors.io/?u=http://stockmarket.streamdata.io/prices";

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var stocks = JSON.parse(xmlhttp.responseText);
                    loadStockMarket(stocks);
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.send();

            <!-- The second argument of the riot.mount() is the opts object used within the Riot.js tag component -->
            function loadStockMarket(stocks){
                riot.mount('stockmarket-table', { title: 'Stocks', stocks: stocks });
                riot.mount('stockmarket-barchart', { title: 'Graph', stocks: stocks});
            }
        </script>
    </body>
</html>